---
title: 鸿蒙-卡证识别
tags: [HarmonyOS]
date: 2025-05-06 19:14:38
keywords: HarmonyOS,鸿蒙应用开发,身份证识别,银行卡识别,文档扫描,AI识图,Vision Kit
---


## 前言

在移动端实名认证的过程中，需要移动端识别图片是不是身份证，并且识别出身份证上的相关信息，上报到服务端，减少后台人工比对的工作量。
我们之前是使用的服务端api，将拍好的照片先上传至服务端识别，然后由服务端告诉移动端相关信息。在鸿蒙上看到了Vision Kit(场景视觉化服务)中有卡证识别，提供身份证（目前仅支持中国大陆二代身份证，且不包含民汉双文身份证）、行驶证、驾驶证、护照、银行卡等证件的结构化识别服务，满足卡证的自动分类功能，系统可自动判断所属卡证类型并返回结构化信息和卡证图片信息。

## 开发
对于需要填充卡证信息的场景，如身份证、银行卡信息等，可使用卡证识别控件读取OCR（Optical Character Recognition）信息，将结果信息返回后进行填充。支持单独识别正面、反面，或同时进行双面识别。
我们先来看一下身份证识别相关配置。
使用的控件是`CardRecognition`，直接嵌入到页面上就可以该控件会直接调用相机进行识别，这里不需要我们申请权限，类似与 SaveButton 这种安全控件。
使用之后会被应用隐私数据访问记录中记录下来。
使用该控件之前需要先判断下设备是否支持.

``` TypeScript
 if(canIUse("SystemCapability.AI.Component.CardRecognition")){
      CardRecognition({
        .....
      })
 }
```
据其他开发者反馈，某些设备上这个canIUse方法会失效，不过我还没遇到过。
接下来配置一下需要用到的属性
``` TypeScript
CardRecognition({
    supportType:CardType.CARD_ID,
    cardSide:this.cardSide,
    cardRecognitionConfig:{
    isPhotoSelectionSupported:true,
    defaultShootingMode:ShootingMode.AUTO
    },
    callback:async(params:CallbackParam)=>{
    if(params.code == 200 && params.cardInfo){
        console.error("识别成功")
        console.error(`${ JSON.stringify(params.cardInfo)}`)
        if(this.cardSide == CardSide.FRONT){
        emitter.emit("id_card_recognition",{data:params.cardInfo.front})
        }else{
        emitter.emit("id_card_recognition",{data:params.cardInfo.back})
        }
        router.back()

    }else{
        console.error("识别失败")
        promptAction.showToast({message:"识别失败"})
        router.back()
    }
    }
})
```

这里的`supportType`和`callback`属性是必填项。其中`supportType`属性我们这里设置的是`CardType.CARD_ID`,表示要识别身份证信息，注意导入包时 `import { CardType } from '@hms.ai.CardRecognition';`，不要搞混了。
这里还支持其他属性，可以在官网查询[CardType](https://developer.huawei.com/consumer/cn/doc/harmonyos-references/vision-card-recognition#section156871424104118)  
