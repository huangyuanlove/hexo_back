---
title: 自定义注解，打造自己的框架-下篇
tags: [Android]
date: 2019-12-04 22:53:52
keywords: [自定义注解,Annotation,AutoService,AbstractProcessor,反射,javapoet]
---



该系列介绍自定义注解，完成如下功能。

\- [x] @BindView 代替  findViewById 

\- [x] @ClickResponder 代替 setOnClickListener

\- [ ] @LongClickResponder 代替 setOnLongClickListener

\- [ ] @IntentValue 代替 getIntent().getXXX

\- [ ] @BroadcastResponder 代替 registerReceiver

\- [ ] @RouterModule、@RouterPath 来进行反依赖传递调用



前两篇介绍了一丢丢自定义注解过程中使用到的东西，现在我们正式开始写框架。

<!--more-->

#### 结构

一般来讲，注解类框架(在Android)会分成三个部分，

* annotation模块(java lib)

  用来存放注解类的，对应gradle引用`annotationProcessor xxxx`

* compiler模块(java lib)

  用来存放生成辅助类的，对应gradle引用`implementation  xxxx`

* api模块(Android lib)

  用来提供给使用者的接口，对应gradle引用`implementation  xxxx`，这个模块中会存在大量的反射调用，主要是调用生成的辅助类中的方法。

* example(lib)模块和app(application)模块

  用来存放demo的，一般会区分在lib和application中的使用

也有一些框架会把api模块和compiler模块放在一块，无所谓了。。。。

首先来创建新的工程，然后创建对应的模块，注意：**annotation和compiler模块是java lib，不要创建成Android lib**

我们先来实现一下`BindView `和`ClickResponder `这两个注解

